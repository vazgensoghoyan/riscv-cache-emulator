| Лабораторная работа №3    | 24Б10                   | Архитектура компьютера |
| ------------------------- | ----------------------- | ---------------------- |
| Эмулятор RISC-V           | Согоян Вазген Айкович   | 2025                   |

## Инструментарий

Язык C++, стандарт C++23

## Что реализовано

> Пишем что было выполнено. Если что-то по ТЗ не работает, то лучше указать это здесь.

# Описание:

Полученные параметры системы

| Параметр            | Значение (с единицами измерения) |
| ------------------- | -------------------------------- |
| MEMORY_SIZE         |  |
| ADDRESS_LEN         |  |
| CACHE_TAG_LEN       |  |
| CACHE_INDEX_LEN     |  |
| CACHE_OFFSET_LEN    |  |
| CACHE_SIZE          |  |
| CACHE_LINE_SIZE     |  |
| CACHE_LINE_COUNT    |  |
| CACHE_SET_COUNT     |  |
| CACHE_WAY           |  |

Расчёт:

// формулы и пояснения по расчётам

# Описание:

Полученные параметры системы

| Параметр         | Значение (с единицами измерения) |
| ---------------- | -------------------------------- |
| MEMORY_SIZE      | 256 КБ (262 144 байт)            |
| ADDRESS_LEN      | 18 бит                           |
| CACHE_TAG_LEN    | 8 бит                            |
| CACHE_INDEX_LEN  | 5 бит                            |
| CACHE_OFFSET_LEN | 5 бит                            |
| CACHE_SIZE       | 4 КБ (4096 байт)                 |
| CACHE_LINE_SIZE  | 32 байта                         |
| CACHE_LINE_COUNT | 128 линий                        |
| CACHE_SET_COUNT  | 32 набора (set)                  |
| CACHE_WAY        | 4‑х канальный (4 way)            |

## Расчёт:

**1. Размер адресного пространства**

MEMORY_SIZE = 256 * 1024 = 262 144 байт = 2¹⁸ байт, следовательно:

ADDRESS_LEN = log2(MEMORY_SIZE) = 18 бит.

**2. Разбиение адреса**

Адрес в кэше состоит из:

- CACHE_TAG_LEN = 8 бит (тег) 
- CACHE_INDEX_LEN = 5 бит (индекс набора) 
- CACHE_OFFSET_LEN = ? (смещение в строке)

CACHE_OFFSET_LEN = ADDRESS_LEN − CACHE_TAG_LEN − CACHE_INDEX_LEN = 18 − 8 − 5 = 5 бит.

**3. Размер строки кэша**

Размер строки определяется количеством бит смещения:

CACHE_LINE_SIZE = 2^CACHE_OFFSET_LEN = 2⁵ = 32 байта.

**4. Организация кэша**

* Количество наборов (set):

CACHE_SET_COUNT = 2^CACHE_INDEX_LEN = 2⁵ = 32.

* Ассоциативность кэша:

CACHE_WAY = 4.

* Общее количество строк кэша:

CACHE_LINE_COUNT = CACHE_SET_COUNT * CACHE_WAY = 32 * 4 = 128 строк.

**5. Общий размер кэша**

CACHE_SIZE = CACHE_LINE_COUNT * CACHE_LINE_SIZE = 128 * 32 = 4096 байт = 4 КБ.

---

> Раздел, в котором вы описываете свою реализацию:
>
> Cache:
> - какие классы/функции созданы для представления кеша, как реализованы политики вытеснения и конфигурация в целом, как он работает.
>
> ISA:
> - как выполнено чтение и парсинг входного файла, какие структуры в коде были реализованы для хранения/представления команд.
>
> Моделирование задачи (task.bin):
> - результат работы написанной программы (то, что выводится в стандартный поток вывода / файл при разных аргументах командной строки).
>
> ... прочее, что считаете полезным описать

### Примечания по оформлению (удалить из итоговой версии отчёта)

1. Не нужно вставлять своё описание как quote (цитату).
2. Разбивайте ваш текст на логические разделы и отделяйте их заголовками.
3. Если хочется вставить фрагменты кода, то делаете это блоком кода. Если же ссылаетесь на код, то делайте это через permalink на файлы в репозитории. Не нужно вставлять большую копипасту кода из своего исходника.
4. Можно пользоваться всеми возможностями [Github Markdown](https://docs.github.com/ru/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/quickstart-for-writing-on-github). Главное, чтобы корректно рендерилось на GitHub.
5. Никаких фоток в отчёте, ровно как и скринов полного экрана!
6. Если вам нужны изображения, то создайте в репозитории папку, в котором все эти изображения будут лежать и [ссылайтесь на них](https://docs.github.com/ru/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax#images).
